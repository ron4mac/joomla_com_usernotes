'use strict';var SimpleStarRating=function(){return function(a){function d(b,e){return(b=a.getAttribute(b))?b:e}function f(){a.setAttribute("disabled","");m=!0}function h(b){c();for(var e=0;e<g.length&&!(e>=b);e++)e===Math.floor(b)&&e!==b&&g[e].classList.add("half"),g[e].classList.add("active")}function k(){var b=parseFloat(d("data-rating",0));b?(n=b,h(n)):l()}function l(){r=parseFloat(d("data-default-rating",0));h(r)}function c(){for(var b=0;b<g.length;b++)g[b].classList.remove("active"),g[b].classList.remove("half")}
function p(b){if(!m&&this===b.target){var e=g.indexOf(b.target);if(-1!==e){e+=1;if("function"===typeof this.onrate)this.onrate(n);b=new CustomEvent("rate",{detail:b.metaKey?0:e});f();a.dispatchEvent(b)}}}var u=parseInt(d("data-stars",5)),m="undefined"!=typeof a.getAttribute("disabled"),r=parseFloat(d("data-default-rating",0)),n=-1,g=[];a.innerHTML="";a.style.display="inline-block";for(var t=0;t<u;t++){var q=document.createElement("span");q.className="star";q.addEventListener("click",p);0<t?g[t-1].appendChild(q):
a.appendChild(q);g.push(q)}this.disable=f;this.enable=function(){a.removeAttribute("disabled");m=!1};this.setCurrentRating=function(b){n=b;a.setAttribute("data-rating",n);k()};this.setDefaultRating=function(b){r=b;a.setAttribute("data-default-rating",r);l()};this.onrate=function(b){};a.addEventListener("mouseout",function(){(m=null!==a.getAttribute("disabled"))||k()});a.addEventListener("mouseover",function(){(m=null!==a.getAttribute("disabled"))||c()});l()}}(),RangeR=function(){return function(a){function d(c,
p){console.log(a,c);l();c=new CustomEvent("rate",{detail:c.metaKey?0:p});a.dispatchEvent(c)}var f=!1,h=parseFloat(function(c,p){return(c=a.getAttribute(c))?c:p}("data-default-rating",0)),k=-1;const l=()=>{a.firstElementChild.oninput=null;f=a.firstElementChild.disabled=!0};this.disable=l;this.setCurrentRating=function(c){k=c;a.setAttribute("data-rating",k);a.firstElementChild.value=k;a.firstElementChild.style.setProperty("--value",k)};this.setDefaultRating=function(c){h=c;a.setAttribute("data-default-rating",
h);a.firstElementChild.value=h;a.firstElementChild.style.setProperty("--value",h)};this.sendRating=d;a.addEventListener("touchend",function(c){if(f)return!1;d(c,this.firstElementChild.value)});a.style.display="inline-block";a.innerHTML=`
	<input
		type = "range"
		class = "rrating"
		min = "1"
		max = "5"
		step = "1"
		oninput = "this.style.setProperty('--value',this.value)"
		onchange = "UNote.robj.sendRating(event,this.value);this.style.setProperty('--fill','#66F')"
		style = "--fill: #3AF;--symbol:var(--star);--value:${h}">`}}();UNote.hoistRating=a=>"ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints?new RangeR(a):new SimpleStarRating(a);
UNote.popRate=()=>{let a=document.getElementById("popRate");var d=a.querySelector(".rating");d=UNote.hoistRating(d);UNote.robj=d;a.style.display="block";window.addEventListener("click",()=>{a.style.display="none"},{once:!0,capture:!0});window.addEventListener("keydown",()=>{a.style.display="none"},{once:!0,capture:!0})};
UNote.rateEvt=a=>{(0!==a.detail||confirm("Clear rating for this item?"))&&UNote.addRating(a.detail,function(d){document.getElementById("popRate").style.display="none";let f=document.getElementById("ratep");f.onclick=null;f.classList.remove("active");d.err?alert(d.err):(f.querySelector(".strating").style.width=d.ravg/5*100+"%",document.getElementById("numrats").innerHTML=`(${d.rcnt})`)})};